var f=Object.defineProperty;var g=(n,t,e)=>t in n?f(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var o=(n,t,e)=>g(n,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&s(l)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();class a{constructor(t,e){o(this,"x");o(this,"y");this.x=t,this.y=e}addVector(t){this.x+=t.x,this.y+=t.y}rotateVector(t){const e=t*(Math.PI/180),s=Math.cos(e),i=Math.sin(e),r=this.x*s-this.y*i,l=this.x*i+this.y*s;this.x=r,this.y=l}copy(){return new a(this.x,this.y)}}class d{constructor(t,e,s){o(this,"position");o(this,"radius");o(this,"boundries");o(this,"color");o(this,"colors",["red","yellow","green"]);this.position=t,this.boundries=e,this.radius=s,this.color=this.colors[Math.floor(Math.random()*this.colors.length)]}reposition(){this.position=new a(Math.random()*(this.boundries.x-100)+50,Math.random()*(this.boundries.y-100)+50),this.color=this.colors[Math.floor(Math.random()*this.colors.length)]}draw(t){t.beginPath(),t.arc(this.position.x,this.position.y,this.radius,0,2*Math.PI),t.fillStyle=this.color,t.fill()}}class c{constructor(t,e,s){o(this,"directionVector",new a(1,0));o(this,"radius");o(this,"snakeBody",[]);o(this,"positionHistory",[]);this.radius=e,this.snakeBody.push(t.copy());const i=s;for(let r=0;r<i;r++)this.snakeBody.push(t.copy())}rotate(t){t?this.directionVector.rotateVector(3):this.directionVector.rotateVector(-3)}boundryCollision(t,e){let s=this.snakeBody[0];return s.x-this.radius<=0||s.x+this.radius>=t||s.y-this.radius<=0||s.y+this.radius>=e}bodyCollision(){let t=this.snakeBody[0];if(this.snakeBody.length*this.radius*2>this.positionHistory.length)return!1;for(let s=2;s<this.snakeBody.length;s++)if(Math.sqrt((t.x-this.snakeBody[s].x)**2+(t.y-this.snakeBody[s].y)**2)<this.radius*2)return!0;return!1}foodCollision(t){let e=this.snakeBody[0];return Math.sqrt((e.x-t.position.x)**2+(e.y-t.position.y)**2)<this.radius*2}grow(){let t=this.snakeBody[this.snakeBody.length-1].copy(),e=this.snakeBody[this.snakeBody.length-2].copy(),s=t.copy();e.addVector(new a(t.x*-1,t.y*-1)),s.addVector(e),this.snakeBody.push(s)}move(){const t=this.snakeBody[0],e=this.directionVector;t.addVector(e),this.positionHistory.unshift(t.copy());const s=this.snakeBody.length*this.radius*2;this.positionHistory.length>s&&this.positionHistory.pop();for(let i=1;i<this.snakeBody.length;i++){const r=i*this.radius*2;this.positionHistory[r]&&(this.snakeBody[i]=this.positionHistory[r].copy())}}draw(t){let e=0;for(let s of this.snakeBody)t.beginPath(),t.arc(s.x,s.y,this.radius,0,2*Math.PI),e%2===0?t.fillStyle="blue":t.fillStyle="lightblue",t.fill(),e++}}let p=document.getElementById("canvas"),u=document.getElementById("score"),y=document.getElementById("high-score"),k=p.getContext("2d");class m{constructor(t,e,s){o(this,"width");o(this,"height");o(this,"ctx");o(this,"snake");o(this,"food");o(this,"score",0);o(this,"highScore",0);o(this,"restartable",!1);o(this,"snakeControl",null);o(this,"intervalId");this.width=t,this.height=e,this.ctx=s,this.snake=new c(new a(t/4,e/2),10,5),this.food=new d(new a(300,300),new a(500,500),10)}rotateSnake(t){this.snake.rotate(t)}restart(){this.width=this.width,this.height=this.height,this.snake=new c(new a(this.width/4,this.height/2),10,5),this.food=new d(new a(300,300),new a(500,500),10),this.score>this.highScore&&(this.highScore=this.score,localStorage.setItem("high-score",this.highScore.toString())),this.score=0;let t=setInterval(()=>h.update(),1e3/100);h.intervalId=t}update(){u!==null&&y!==null&&(u.innerText="Score: "+h.score,y.innerText="High score: "+h.highScore),this.ctx.clearRect(0,0,this.width,this.height),this.snakeControl==="d"?h.rotateSnake(!0):this.snakeControl==="a"&&h.rotateSnake(!1),this.snake.move(),this.snake.foodCollision(this.food)&&(this.snake.grow(),this.score++,this.food.reposition()),this.food.draw(this.ctx),this.snake.draw(this.ctx),(this.snake.bodyCollision()||this.snake.boundryCollision(this.width,this.height))&&(clearInterval(this.intervalId),this.restartable=!0,this.ctx.font="48px Arial",this.ctx.fillStyle="red",this.ctx.fillText("Game over",this.width/4,50),this.ctx.font="16px Arial",this.ctx.fillText("press R to restart",this.width/3,70))}}const h=new m(500,500,k);document.addEventListener("keypress",n=>{n.key.toLowerCase()==="d"?h.snakeControl="d":n.key.toLowerCase()==="a"&&(h.snakeControl="a")});document.addEventListener("keyup",n=>{h.snakeControl=null});document.addEventListener("keypress",n=>{n.key.toLowerCase()==="r"&&h.restartable&&(h.restartable=!1,h.restart())});let w=setInterval(()=>h.update(),1e3/100);localStorage.getItem("high-score")!==null&&(h.highScore=Number.parseInt(localStorage.getItem("high-score")));h.intervalId=w;
